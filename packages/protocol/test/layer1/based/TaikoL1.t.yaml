TaikoL1Test:
  - given: a new TaikoL1 with 10 block slots and a sync interval of 5
    then:
      - when: test1
        then:
          - it: initializes the genesis block
          - it: initializes the first transition
          - it: finalizes the genesis block
          - it: counts total blocks as 1
          - it: retrieves correct data for the genesis block
          - it: retrieves correct data for the genesis block's first transition
          - it: fails to retrieve block 1, indicating block not found
          - it: returns the genesis block and its first transition for getLastVerifiedTransitionV3
          - it: returns empty data for getLastSyncedTransitionV3 but does not revert

      - when: proposing one more block with custom parameters
        then:
          - it: places the block in the first slot
          - it: sets the block's next transition id to 1
          - it: the returned metahash should match the block's metahash
          - it: matches the block's timestamp and anchor block id with the parameters
          - it: total block count is 2
          - it: retrieves correct data for block 1

      - when: proposing one more block with default parameters
        then:
          - it: places the block in the first slot
          - it: sets the block's next transition id to 1
          - it: the returned metahash should match the block's metahash
          - it: sets the block's timestamp to the current timestamp
          - it: sets the block's anchor block id to block.number - 1
          - it: total block count is 2
          - it: retrieves correct data for block 1

      - when: proposing one more block with default parameters but non-zero parentMetaHash
        then:
          - it: does not revert when the first block's parentMetaHash matches the genesis block's metahash
          - it: reverts when proposing a second block with a random parentMetaHash

      - when: proposing 9 blocks as a batch to fill all slots
        then:
          - it: total block count is 10

          - when: propose the 11th block before previous blocks are verified
            then:
              - it: reverts indicating no more slots available

          - when: prove all existing blocks with correct first transitions
            then:
              - it: total block count is 10
              - it: returns the block 9 and its first transition for getLastVerifiedTransitionV3
              - it: returns the block 5 and its first transition for getLastSyncedTransitionV3

              - when: proposing the 11th block after previous blocks are verified
                then:
                  - it: total block count is 12
                  - it: getBlockV3(0) reverts indicating block not found

          - when: prove all existing blocks with wrong first transitions
            then:
              - it: total block count is 10
              - it: returns the genesis block and its first transition for getLastVerifiedTransitionV3
              - it: returns empty data for getLastSyncedTransitionV3 but does not revert

              - when: prove all existing blocks with correct first transitions
                then:
                  - it: total block count is 10
                  - it: returns the block 9 and its first transition for getLastVerifiedTransitionV3
                  - it: returns the block 5 and its first transition for getLastSyncedTransitionV3
